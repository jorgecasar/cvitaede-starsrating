<link rel="import" href="./bower_components/polymer/polymer.html">

<dom-module id="cvitaede-starsrating">
  <template>
    <style>
      :host {
        display: block;
        max-width:500px;
        min-height:40px;
      }
      fieldset,
    label {
      margin: 0;
      padding: 0;
    }
    
    .rating {
      border: none;
      float: left;
    }
    
    .rating>input {
      display: none;
    }
    
    .rating>label:before {
      margin: 5px;
      font-size: 3em;
      display: inline-block;
      content: "\2605";
    }
    
    .rating>.half:before {
      content: "\f089";
      position: absolute;
    }
    
    .rating>label {
      color: #ddd;
      float: right;
    }
    
    .rating>input:checked~label {
      color: #FFD700;
    }
    </style>
    <fieldset class="rating">
      <template is="dom-repeat" items="[[_stars]]">
        <input type="radio" id$="star[[_computeIndex(index)]]" name="rating" value="[[_computeIndex(index)]]" disabled />
        <label class="full" for="star[[_computeIndex(index)]]"></label>
      </template>

    </fieldset>
  </template>

  <script>
    Polymer({

      is: 'cvitaede-starsrating',

      properties: {
        _stars:{
          type: Object
        },
        num_stars: {
          type: Number,
          value: 7
        },
        rating: {
          type: Number,
          value: 3
        }
      },
      ready: function(){
        this._stars = new Array(this.num_stars);
      },
      attached: function(){
        this.querySelector('#star'+this.rating).setAttribute('checked','checked');
      },
      _computeIndex: function(index){
        return this.num_stars - index;
      }
    });
  </script>
</dom-module>
